# 클로저

> 함수와 그 함수가 선언된 어휘적 환경의 조합
>
> - [MDN](https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures)

외부 함수보다 중첩 함수가 더 오래 유지되면 외부 함수의 생명 주기가 종료하여도 변수를 참조할 수 있다.  
이런 중첩 함수를 클로저라고 부른다!

오래 유지되지 않으면? 일반적으로는 클로저가 아니라고 할 수 있음.

## 렉시컬 스코프

> 자바스크립트 엔진은 함수를 어디서 호출했는지가 아니라 어디에 정의했는지에 따라 상위 스코프를 결정하고, 이를 렉시컬 스코프라 한다.

### 스코프 === 실행 컨텍스트의 렉시컬 환경

### 스코프 체인

렉시컬 환경은 자신의 **외부 렉시컬 환경에 대한 참조**를 통해 상위 렉시컬 환경과 연결되며, 이를 **스코프 체인**이라 한다.

## 함수 객체의 내부 슬롯 [[Environment]]

> 함수가 정의된 환경과 호출되는 환경은 다를 수 있다.  
> 따라서, 렉시컬 스코프가 가능하려면 함수는 호출 환경과는 상관없이 정의된 환경인 상위 스코프를 기억해야 한다.

- 함수 정의가 평가되어 함수 객체를 생성할 때, 함수는 자신의 내부 슬롯 [[Environment]]에 상위 스코프의 참조를 저장한다.  
  이 상위 스코프의 참조는 현재 실행 중인 실행 컨텍스트의 렉시컬 환경을 의미한다.

### 자유 변수

> 클로저에 의해 참조되는 상위 스코프의 변수
