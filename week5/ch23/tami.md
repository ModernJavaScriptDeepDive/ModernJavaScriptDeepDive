# 📒23 실행 컨텍스트
## 실행 컨텍스트
기본적으로 소스코드를 평가하여 실행 컨텍스트를 생성한다.
소스코드를 실행하는데 필요한 환경을 제공하고 실행결과를 관리하는 영역
**스코프**와 **코드 실행 순서**를 관리하는 매커니즘으로 모든 코드는 실행컨텍스트를 통해 실행되고 관리된다.

|관리 대상|관리 주체|
|------|---|
|스코프|실행컨텍스트의 렉시컬 환경|
|실행순서|실행컨텍스트의 스택|

`소스코드 평가`: 실행 컨텍스트 생성 후 스코프 등록 
`소스코드 실행`: 런타임 시작- (선언문제외)소스코드 순차 실행  변수나 함수의 참조를 실행컨텍스트가 관리하는 스코프에서 검색해 취득

|소스코드 타입|설명|
|------|---|
|전역코드|`var` 변수, 함수선언문|
|함수코드|지역 스코프 생성, 지역변수, 매개변수, arguments 객체 관리|
|eval코드|strict mode에 독자적인 스코프 생성|
|모듈코드|모듈별로 독립적인 스코프 생성|

### 실행컨텍스트 순서
1. 전역코드 평가 실행 
 전역변수와 함수 선언문 전역스코프에 등록  -> 전역변수 값 할당, 함수 호출 
2. 함수 코드 평가
    매개변수와 지역변수 지역스코프에 등록 -> this바인딩
3. 함수코드 실행(런타임)
    매개변수와 지역변수에 값 할당 

코드가 실행되기 위해선 스코프를 구분해 바인됭된 값이 관리되어야 한다.
![](https://i.imgur.com/sUaIs1Q.jpg)

## 렉시컬환경
렉시컬 컨텍스트를 구성하는 컴포넌트: `스코프`와 `식별자`관리

실행컨텍스트 : LexicalEnvironment , VariableEnvironment
렉시컬 환경 : 환경코드(EnvironmentRecord) , 외부렉시컬환경에 대한 참조(OuterLexicalEnvironmentReference)



---

## 렉시컬스코프
상위스코프는 함수가 어디에 정의되었는지에 따라 결정된다 (어디서 호출 X)
#### 스코프체인
상위 스코프의 참조(외부 렉시컬환경에 대한 참조)를 통해 상위 렉시컬 환경과 연결되는것


## 실행컨텍스트의 생성과 식별자 검색 과정

1. 전역객체생성
2. 전역객체 평가 
전역실행컨텍스트 생성
전역 렉시컬 환경 생성
전역 환경 레코드 생성
this 바인딩
외부 렉시컬 참조 결정

- 전역환경레코드: `var` 과 `let``const`구분하기 위해 존재 (객체환경레코드, 선언적 환경레코드) -> **전역스코프** & **전역객체** 관리

이때 `var`로 선언한변수 & 함수선언문으로 호출한 함수객체는 선언 이전에 호출될 수 있다.
`let`,`const`로선언한변수는 호이스팅이 되는건 변함없지만, 런타임 중 변수 선언문에 도달하기 전까지 일시적으로 호출시 참조에러가 발생한다.


#### 🆀 실행컨텍스트는 무엇이죠?[❓질문]
**스코프**와 **코드 실행 순서**를 관리하는 것으로 소스코드를 실행하는데 필요한 환경을 관리합니다.

#### 🆀 스코프가 뭐죠?[❓질문]
실행컨텍스트의 렉시컬 환경으로 식별자를 관리합니다.

#### 🆀 렉시컬 환경이 뭐죠?
스코프와 식별자를 관리는 컴포넌트로 외부 렉시컬 관경에 대한 참조를 통해 스코프 체인이 일어나게 합니다.
렉시컬 컨텍스트를 구성하는 컴포넌트로 
`json` : 스코프를 구분하여 식별자를 등록하고 관리하는 저장소 역할

#### 🆀 스코프체인은 무엇인가요?[❓질문] 
식별자 결정을 위해 실행중인 실행컨텍스트에서 식별자를 검색하고 없을 시 상위 스코프로 이동해서 종점인 `전역 렉시컬환경`까지 식별자를 검색하는 루트를 말합니다.

#### 🆀 alert 도 사실 전역객체의 프로퍼티인데 어떻게 `window`키워드 없이 사용할 수 있나요?[❓질문] 
전역 코드를 평가하는 과정에 전역환경레코드의 BindingObject를 통해 전역객체의 프로퍼티와 메서드가 됩니다.
