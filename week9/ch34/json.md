# 이터러블

## 이터레이션 프로토콜

> 순회 가능한 자료구조를 만들기 위해 정의한 규칙

- for of, 스프레드 문법, 배열 디스트럭처링 할당의 대상으로 사용가능하다.
- 이터레이션 프로토콜을 준수한 객체를 이터러블이라고 한다.

### 이터러블

Symbol.iterator를 프로퍼티 키로 사용한 메서드를 직접 구현하거나 프로토타입 체인을 통해 상속받은 객체를 의미한다.

```js
// 이터러블인지 확인하는 함수
const isIterable = v => v !== null && typeof v[Symbol.iterator] === 'function';
```

> 현재 일반 객체는 스프레드 문법의 사용이 불가능하지만  
> TC39 프로세스의 제안에 따르면, 일반 객체에도 스프레드 문법을 사용할 수 있다.

### 이터레이터

- Symbol.iterator 메서드가 반환한 이터레이터는 next 메서드를 갖는다.
  - next 메서드는 이터러블의 각 요소를 순회하는 포인터의 역할!
    - next 메서드를 호출하면 result 객체를 반환한다.
      - result 객체는 value와 done *(마지막 객체인지 확인하는 불린값)* 으로 구성된다.

## 이터러블과 유사 배열 객체

**유사 배열 객체**  
- 인덱스로 프로퍼티에 접근할 수 있고, length 프로퍼티를 가진 객체
- 일반적으로 for of 가 불가능하지만 arguments, NodeList, HTMLCollection 은 유사 배열 객체이면서 이터러블이다.
  - es6부터 적용됨 :)

> Array.from을 이용하면 유사 배열 객체나 이터러블을 배열로 전환할 수 있음.

## 이터러블 프로토콜의 필요성

- 다양한 데이터 공급자가 하나의 순회 방식을 갖도록 규정
- 데이터 소비자가 효율적으로 다양한 데이터 공급자를 사용할 수 있게 해주는 인터페이스의 역할

> 데이터 공급자 : Array, String, Map, Set, DOM 컬렉션 등
> 데이터 소비자 : for of, 스프레드, 배열 디스트럭처링, Map 및 Set 생성자 등

**지연평가**  
- 데이터가 필요한 시점 이전까지 데이터를 생성하지 않고 있다가 필요한 시점에 데이터를 생성하는 기법
- 즉, 평가 결과가 필요할 때까지 평가를 늦추는 기법
