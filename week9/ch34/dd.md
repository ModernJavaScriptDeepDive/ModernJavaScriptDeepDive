# 이터러블

## 이터레이션 프로토콜

> ES6에서 도입된, 순회 가능한 데이터 컬렉션(자료구조)를 만들기 위해 ECMAScript 사양에 정의하여 미리 약속한 규칙

- ES6 이전에 순회 가능한 데이터 컬렉션들, 배열/문자열/유사배열객체/DOM 컬렉션 등은 **통일된 규약 없이 각자 나름의 구조를 갖고, 각기 다른 방법으로 순회했다** 

- ES6부터 이터러블을 통일해서 for fo / 스프레드 / 배열 디스트럭쳐링 할당이 가능하도록 일원화했다! 


## 이터러블 프로토콜 / 이터레이션 프로토콜

### 애초에 프로토콜이 뭐지?

> 컴퓨터 내부에서, 또는 컴퓨터 사이에서 데이터의 교환 방식을 정의하는 규칙 체계


### 이터러블 프로토콜

- Symbol.iterator 메서드가 호출로 이터레이터를 반환한다. 

- 이 프로토콜을 준수한 객체를 이터러블이라 한다. 대표적으로 배열, 문자열이 있다.

- for of 순회 가능, 스프레드, 디스트럭쳐링 가능

### 이터레이터 프로토콜

- 이터레이터는 next 메서드를 소유하며, next 호출시 이터러블을 순회 / value, done 프로퍼티를 갖는 이터레이트 리절트 객체를 반환한다. 

- 이 프로토콜을 준수한 객체를 이터레이터라고 한다

- 즉 iterator 메소드를 보유한 이터러블 객체가 해당 메소드를 사용해서 이터레이터 객체를 반환하는 것

- 이터레이터의 next 메서드는 이터러블의 각 요소를 순회하기 위한 포인터 역할

- next를 호출하면 이터러블을 순차적으로 한 단계씩 순회하고, 그 결과로 이터레이터 리절트 객체를 반환


## for (변수선언문) of (이터러블) 동작 원리

- of 뒤의 이터러블에서 iterator 메소드를 통해 이터레이터를 만들고, 
- next를 통해 이터러블을 순회하며 
- next의 반환 값인 이터레이터 리절트 객체를 for of의 변수 선언문에 할당한다. 
- 이터레이터 리절트 객체의 done이 false라면 순회를 계속하고, true면 순회를 중단한다.


## 유사배열객체

> length 프로퍼티가 있고, 인덱스를 나타내는 숫자 형식의 키를 가진 객체

- 단, 이터러블이 아니기 때문에 for of로 순회할 수 없다.

- Array.from으로 유사배열객체/이터러블을 배열로 변환할 수 있다. 


## 이터레이션 프로토콜은 왜 필요한가?

- 데이터 공급자 (배열 / 문자열 / 유사배열객체 등등..) 과 데이터 소비자 (for of / for in / forEach / 스프레드 / 디스트럭쳐링 등..)를 연결하는 통일된 인터페이스를 만든다.



