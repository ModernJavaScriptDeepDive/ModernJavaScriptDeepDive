# 스코프

> 모든 식별자는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다.  
> 이를 스코프라 한다.  
> 즉, 스코프는 식별자가 유효한 범위를 말한다.
>
> - 모자스 :lizard:

> 현재 실행되는 컨텍스트를 말한다. 여기서 컨텍스트는 값과 표현식이 "표현"되거나 참조 될 수 있음을 의미한다.
>
> - [MDN 스코프](https://developer.mozilla.org/ko/docs/Glossary/Scope)

---

## 렉시컬 환경

> 코드가 어디서 실행되며, 주변에 어떤 코드가 있는지를 렉시컬 환경이라고 부른다.  
> 즉, 코드의 문맥은 렉시컬 환경으로 이뤄진다.
>
> - 모자스 :lizard:

> 변수 및 함수에 대한 식별자의 연결을 정의하는데 사용되는 일종의 규격
>
> - [ECMA262](https://262.ecma-international.org/10.0/#sec-lexical-environments)

---

## 스코프의 존재 이유

스코프가 없다면 변수는 충돌을 일으키므로 식별자가 중복될 수 없다.  
컴퓨터로 치면 폴더와도 같고, 스코프가 없다는 건 폴더 하나에 모든 파일을 넣는 것과 다름 없음.  
네이밍하다가 지쳐..

---

## 지역 스코프

> 함수 몸체 내부

지역 스코프는 코드 블록*1*이 아니라 함수에 의해서만 생성된다.  
그래서 자바스크립트는 함수 레벨 스코프의 특징을 가진다고 할 수 있다.  
물론 *let, const*는 블록 레벨 스코프를 지원하므로 엄밀히 말하면 *var*로 인해서 함수 레벨 스코프의 특징을 가짐.

> 1. 코드블록 : if, for, while, try 등의 블록

---

## 스코프 체인

함수는 중첩될 수 있고, 함수의 지역 스코프도 중첩될 수 있다.  
그러므로 스코프는 계층적 구조를 가지게 되며, 이 구조를 스코프 체인이라고 한다.

> 1. 변수를 참조할 때, 자바스크립트 엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 변수를 검색한다.
>
> 2. 스코프 체인은 실행 컨텍스트의 렉시컬 환경을 단방향으로 연결한 것.
>
> - 모자스 :lizard:

왜 단방향이냐면 상위 스코프에서 하위 스코프의 변수를 참조할 수 없기 때문.

```js
function parent() {
  console.log(val); // val is not defined
  function chileren() {
    var val = 31;
  }
}

parent();
```

---

## 렉시컬 스코프

> 상위 스코프가 동적으로 변하지 않고 함수 정의가 평가되는 시점에 정적으로 결정되는 방식.  
> 정적 스코프라고도 한다.
>
> - 모자스 :lizard:

자바스크립트 함수의 상위 스코프는 호출 위치가 아니라 정의된 스코프에 따라 결정한다.
